{"uid":"7b6dae65ec89f393","name":"Добавление товара в вишлист неавторизованным пользователем","fullName":"tests.test_wishlist.TestCart#test_add_product_to_wishlist_by_unauthorized_user","historyId":"c52ad5c6324ab3bb265178c5696f71cf","time":{"start":1673644042570,"stop":1673644059464,"duration":16894},"status":"failed","statusMessage":"AssertionError: В течение 5 секунд не был доступен для клика элемент с локатором: ('id', 'bar-notification span.close')","statusTrace":"self = <pages.notification_bar.NotificationBar object at 0x00000146833CBD60>\nstrategy = 'id', locator = 'bar-notification span.close', timeout = 5\n\n    def find_element_clickable(self, strategy, locator, timeout=5) -> WebElement:\n        \"\"\"\n        Поиск элемента, по которому можно кликнуть.\n    \n        :param strategy: способ поиска элемента.\n        :param locator: локатор.\n        :param timeout: время ожидания.\n        :return: элемент.\n        \"\"\"\n        try:\n>           return WebDriverWait(self.driver, timeout).until(ec.element_to_be_clickable((strategy, locator)))\n\npages\\base_page.py:207: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"99649aec31767b2177fed448d6996755\")>\nmethod = <function element_to_be_clickable.<locals>._predicate at 0x000001468339F640>\nmessage = ''\n\n    def until(self, method, message: str = \"\"):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: \nE       Stacktrace:\nE       Backtrace:\nE       \t(No symbol) [0x010CF243]\nE       \t(No symbol) [0x01057FD1]\nE       \t(No symbol) [0x00F4D04D]\nE       \t(No symbol) [0x00F7C0B0]\nE       \t(No symbol) [0x00F7C22B]\nE       \t(No symbol) [0x00FAE612]\nE       \t(No symbol) [0x00F985D4]\nE       \t(No symbol) [0x00FAC9EB]\nE       \t(No symbol) [0x00F98386]\nE       \t(No symbol) [0x00F7163C]\nE       \t(No symbol) [0x00F7269D]\nE       \tGetHandleVerifier [0x01369A22+2655074]\nE       \tGetHandleVerifier [0x0135CA24+2601828]\nE       \tGetHandleVerifier [0x01178C0A+619850]\nE       \tGetHandleVerifier [0x01177830+614768]\nE       \t(No symbol) [0x010605FC]\nE       \t(No symbol) [0x01065968]\nE       \t(No symbol) [0x01065A55]\nE       \t(No symbol) [0x0107051B]\nE       \tBaseThreadInitThunk [0x76C26A39+25]\nE       \tRtlGetFullPathName_UEx [0x77CC7D1D+173]\nE       \tRtlGetFullPathName_UEx [0x77CC7CEB+123]\n\nC:\\hostedtoolcache\\windows\\Python\\3.10.9\\x64\\lib\\site-packages\\selenium\\webdriver\\support\\wait.py:95: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\nself = <tests.test_wishlist.TestCart object at 0x00000146829C6380>\nheader = <pages.header.Header object at 0x00000146833C85B0>\nproduct_card_page = <pages.product_card_page.ProductCardPage object at 0x00000146833C8EE0>\nwishlist_page = <pages.wishlist_page.WishlistPage object at 0x00000146833CB940>\nnotification_bar = <pages.notification_bar.NotificationBar object at 0x00000146833CBD60>\n\n    @title('Добавление товара в вишлист неавторизованным пользователем')\n    def test_add_product_to_wishlist_by_unauthorized_user(self, header, product_card_page, wishlist_page,\n                                                          notification_bar):\n        path = choice(PRODUCTS_WHO_CAN_ADD_TO_WISHLIST)\n    \n        product_card_page.open(path=path)\n        product_card_page.should_be_open_product_card_page(path=path)\n    \n        product = product_card_page.get_product_data()\n    \n        product_card_page.add_product_to_wishlist(is_new_sender=True)\n        notification_bar.should_be_message_about_adding_product_to_wishlist()\n>       notification_bar.close_notification()\n\ntests\\test_wishlist.py:27: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutils\\steps.py:29: in impl\n    step_result = func(*args, **kwargs)\npages\\notification_bar.py:57: in close_notification\n    self.find_element_clickable(*Locators.CLOSE_NOTIFICATION)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.notification_bar.NotificationBar object at 0x00000146833CBD60>\nstrategy = 'id', locator = 'bar-notification span.close', timeout = 5\n\n    def find_element_clickable(self, strategy, locator, timeout=5) -> WebElement:\n        \"\"\"\n        Поиск элемента, по которому можно кликнуть.\n    \n        :param strategy: способ поиска элемента.\n        :param locator: локатор.\n        :param timeout: время ожидания.\n        :return: элемент.\n        \"\"\"\n        try:\n            return WebDriverWait(self.driver, timeout).until(ec.element_to_be_clickable((strategy, locator)))\n        except TimeoutException:\n>           raise AssertionError(\n                f'В течение {timeout} секунд не был доступен для клика элемент с локатором: {(strategy, locator)}',\n            )\nE           AssertionError: В течение 5 секунд не был доступен для клика элемент с локатором: ('id', 'bar-notification span.close')\n\npages\\base_page.py:209: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"browser","time":{"start":1673644040107,"stop":1673644042569,"duration":2462},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"product_card_page","time":{"start":1673644042569,"stop":1673644042569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"wishlist_page","time":{"start":1673644042569,"stop":1673644042569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"notification_bar","time":{"start":1673644042569,"stop":1673644042569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"header","time":{"start":1673644042569,"stop":1673644042569,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"testStage":{"status":"failed","statusMessage":"AssertionError: В течение 5 секунд не был доступен для клика элемент с локатором: ('id', 'bar-notification span.close')","statusTrace":"self = <pages.notification_bar.NotificationBar object at 0x00000146833CBD60>\nstrategy = 'id', locator = 'bar-notification span.close', timeout = 5\n\n    def find_element_clickable(self, strategy, locator, timeout=5) -> WebElement:\n        \"\"\"\n        Поиск элемента, по которому можно кликнуть.\n    \n        :param strategy: способ поиска элемента.\n        :param locator: локатор.\n        :param timeout: время ожидания.\n        :return: элемент.\n        \"\"\"\n        try:\n>           return WebDriverWait(self.driver, timeout).until(ec.element_to_be_clickable((strategy, locator)))\n\npages\\base_page.py:207: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <selenium.webdriver.support.wait.WebDriverWait (session=\"99649aec31767b2177fed448d6996755\")>\nmethod = <function element_to_be_clickable.<locals>._predicate at 0x000001468339F640>\nmessage = ''\n\n    def until(self, method, message: str = \"\"):\n        \"\"\"Calls the method provided with the driver as an argument until the \\\n        return value does not evaluate to ``False``.\n    \n        :param method: callable(WebDriver)\n        :param message: optional message for :exc:`TimeoutException`\n        :returns: the result of the last call to `method`\n        :raises: :exc:`selenium.common.exceptions.TimeoutException` if timeout occurs\n        \"\"\"\n        screen = None\n        stacktrace = None\n    \n        end_time = time.monotonic() + self._timeout\n        while True:\n            try:\n                value = method(self._driver)\n                if value:\n                    return value\n            except self._ignored_exceptions as exc:\n                screen = getattr(exc, \"screen\", None)\n                stacktrace = getattr(exc, \"stacktrace\", None)\n            time.sleep(self._poll)\n            if time.monotonic() > end_time:\n                break\n>       raise TimeoutException(message, screen, stacktrace)\nE       selenium.common.exceptions.TimeoutException: Message: \nE       Stacktrace:\nE       Backtrace:\nE       \t(No symbol) [0x010CF243]\nE       \t(No symbol) [0x01057FD1]\nE       \t(No symbol) [0x00F4D04D]\nE       \t(No symbol) [0x00F7C0B0]\nE       \t(No symbol) [0x00F7C22B]\nE       \t(No symbol) [0x00FAE612]\nE       \t(No symbol) [0x00F985D4]\nE       \t(No symbol) [0x00FAC9EB]\nE       \t(No symbol) [0x00F98386]\nE       \t(No symbol) [0x00F7163C]\nE       \t(No symbol) [0x00F7269D]\nE       \tGetHandleVerifier [0x01369A22+2655074]\nE       \tGetHandleVerifier [0x0135CA24+2601828]\nE       \tGetHandleVerifier [0x01178C0A+619850]\nE       \tGetHandleVerifier [0x01177830+614768]\nE       \t(No symbol) [0x010605FC]\nE       \t(No symbol) [0x01065968]\nE       \t(No symbol) [0x01065A55]\nE       \t(No symbol) [0x0107051B]\nE       \tBaseThreadInitThunk [0x76C26A39+25]\nE       \tRtlGetFullPathName_UEx [0x77CC7D1D+173]\nE       \tRtlGetFullPathName_UEx [0x77CC7CEB+123]\n\nC:\\hostedtoolcache\\windows\\Python\\3.10.9\\x64\\lib\\site-packages\\selenium\\webdriver\\support\\wait.py:95: TimeoutException\n\nDuring handling of the above exception, another exception occurred:\n\nself = <tests.test_wishlist.TestCart object at 0x00000146829C6380>\nheader = <pages.header.Header object at 0x00000146833C85B0>\nproduct_card_page = <pages.product_card_page.ProductCardPage object at 0x00000146833C8EE0>\nwishlist_page = <pages.wishlist_page.WishlistPage object at 0x00000146833CB940>\nnotification_bar = <pages.notification_bar.NotificationBar object at 0x00000146833CBD60>\n\n    @title('Добавление товара в вишлист неавторизованным пользователем')\n    def test_add_product_to_wishlist_by_unauthorized_user(self, header, product_card_page, wishlist_page,\n                                                          notification_bar):\n        path = choice(PRODUCTS_WHO_CAN_ADD_TO_WISHLIST)\n    \n        product_card_page.open(path=path)\n        product_card_page.should_be_open_product_card_page(path=path)\n    \n        product = product_card_page.get_product_data()\n    \n        product_card_page.add_product_to_wishlist(is_new_sender=True)\n        notification_bar.should_be_message_about_adding_product_to_wishlist()\n>       notification_bar.close_notification()\n\ntests\\test_wishlist.py:27: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\nutils\\steps.py:29: in impl\n    step_result = func(*args, **kwargs)\npages\\notification_bar.py:57: in close_notification\n    self.find_element_clickable(*Locators.CLOSE_NOTIFICATION)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <pages.notification_bar.NotificationBar object at 0x00000146833CBD60>\nstrategy = 'id', locator = 'bar-notification span.close', timeout = 5\n\n    def find_element_clickable(self, strategy, locator, timeout=5) -> WebElement:\n        \"\"\"\n        Поиск элемента, по которому можно кликнуть.\n    \n        :param strategy: способ поиска элемента.\n        :param locator: локатор.\n        :param timeout: время ожидания.\n        :return: элемент.\n        \"\"\"\n        try:\n            return WebDriverWait(self.driver, timeout).until(ec.element_to_be_clickable((strategy, locator)))\n        except TimeoutException:\n>           raise AssertionError(\n                f'В течение {timeout} секунд не был доступен для клика элемент с локатором: {(strategy, locator)}',\n            )\nE           AssertionError: В течение 5 секунд не был доступен для клика элемент с локатором: ('id', 'bar-notification span.close')\n\npages\\base_page.py:209: AssertionError","steps":[{"name":"Проверить, что открыта страница карточки продукта","time":{"start":1673644045611,"stop":1673644045722,"duration":111},"status":"passed","steps":[],"attachments":[{"uid":"b67235a671c3a5f9","name":"Screenshot","source":"b67235a671c3a5f9.png","type":"image/png","size":154235}],"parameters":[{"name":"path","value":"'50s-rockabilly-polka-dot-top-jr-plus-size'"}],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1},{"name":"Добавить товар в вишлист","time":{"start":1673644051192,"stop":1673644053099,"duration":1907},"status":"passed","steps":[{"name":"Заполнить поля c атрибутами товара","time":{"start":1673644051204,"stop":1673644052623,"duration":1419},"status":"passed","steps":[],"attachments":[{"uid":"670deda162608add","name":"Screenshot","source":"670deda162608add.png","type":"image/png","size":154702}],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1},{"name":"Указать количество товара: 1","time":{"start":1673644052623,"stop":1673644052837,"duration":214},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Кликнуть по кнопке \"Add to wishlist\"","time":{"start":1673644052837,"stop":1673644052940,"duration":103},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[{"uid":"aa07feccca3f4017","name":"Screenshot","source":"aa07feccca3f4017.png","type":"image/png","size":154252}],"parameters":[{"name":"quantity","value":"1"},{"name":"is_new_sender","value":"True"}],"stepsCount":3,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":2},{"name":"Проверить, что появилось сообщение о добавлении товара в вишлист","time":{"start":1673644053099,"stop":1673644054228,"duration":1129},"status":"passed","steps":[{"name":"Проверить, что сообщение появилось","time":{"start":1673644053099,"stop":1673644053704,"duration":605},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0},{"name":"Проверить текст сообщения","time":{"start":1673644053704,"stop":1673644053747,"duration":43},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"attachments":[{"uid":"42a459a248a37eef","name":"Screenshot","source":"42a459a248a37eef.png","type":"image/png","size":156534}],"parameters":[],"stepsCount":2,"hasContent":true,"shouldDisplayMessage":false,"attachmentsCount":1},{"name":"Закрыть уведомление","time":{"start":1673644054228,"stop":1673644059463,"duration":5235},"status":"failed","statusMessage":"AssertionError: В течение 5 секунд не был доступен для клика элемент с локатором: ('id', 'bar-notification span.close')\n","statusTrace":"  File \"D:\\a\\demo_web_shop\\demo_web_shop\\utils\\steps.py\", line 29, in impl\n    step_result = func(*args, **kwargs)\n  File \"D:\\a\\demo_web_shop\\demo_web_shop\\pages\\notification_bar.py\", line 57, in close_notification\n    self.find_element_clickable(*Locators.CLOSE_NOTIFICATION)\n  File \"D:\\a\\demo_web_shop\\demo_web_shop\\pages\\base_page.py\", line 209, in find_element_clickable\n    raise AssertionError(\n","steps":[],"attachments":[{"uid":"fee1db5d76c42452","name":"Screenshot","source":"fee1db5d76c42452.png","type":"image/png","size":154313}],"parameters":[],"stepsCount":0,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":1}],"attachments":[],"parameters":[],"stepsCount":9,"hasContent":true,"shouldDisplayMessage":true,"attachmentsCount":5},"afterStages":[{"name":"browser::0","time":{"start":1673644059483,"stop":1673644061568,"duration":2085},"status":"passed","steps":[],"attachments":[],"parameters":[],"stepsCount":0,"hasContent":false,"shouldDisplayMessage":false,"attachmentsCount":0}],"labels":[{"name":"feature","value":"Вишлист"},{"name":"epic","value":"Frontend"},{"name":"parentSuite","value":"tests"},{"name":"suite","value":"test_wishlist"},{"name":"subSuite","value":"TestCart"},{"name":"host","value":"fv-az365-755"},{"name":"thread","value":"2732-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.test_wishlist"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"7b6dae65ec89f393.json","parameterValues":[]}